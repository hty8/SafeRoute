import googlemaps
from datetime import datetime
import polyline
import pandas as pd


def replace_str_index(text, index=0, replacement=''):
    return '%s%s%s' % (text[:index], replacement, text[index+1:])


score_table = pd.read_excel('crime_son.xlsx')


gmaps = googlemaps.Client(key='')

# Request directions via public transit
now = datetime.now()
directions_result = gmaps.directions("1122 N Clark St, Chicago, IL 60610, United States",
                                     "1934 S State St, Chicago, IL 60616, United States",
                                     mode="driving",
                                     departure_time=now,
                                     alternatives=True)
print(directions_result)

#directions_result = [{'bounds': {'northeast': {'lat': 41.7655339, 'lng': -87.6090147}, 'southwest': {'lat': 41.71194790000001, 'lng': -87.6831101}}, 'copyrights': 'Map data ©2019', 'legs': [{'distance': {'text': '7.7 mi', 'value': 12444}, 'duration': {'text': '21 mins', 'value': 1239}, 'duration_in_traffic': {'text': '21 mins', 'value': 1230}, 'end_address': 'S Western Ave, Chicago, IL, USA', 'end_location': {'lat': 41.7623591, 'lng': -87.6831101}, 'start_address': 'E 100th Pl, Chicago, IL 60628, USA', 'start_location': {'lat': 41.71194790000001, 'lng': -87.6090147}, 'steps': [{'distance': {'text': '335 ft', 'value': 102}, 'duration': {'text': '1 min', 'value': 16}, 'end_location': {'lat': 41.7128608, 'lng': -87.6090569}, 'html_instructions': 'Head <b>north</b> on <b>S St Lawrence Ave</b> toward <b>E 100th St</b>', 'polyline': {'points': 'uzq}FhcvuOuDH'}, 'start_location': {'lat': 41.71194790000001, 'lng': -87.6090147}, 'travel_mode': 'DRIVING'}, {'distance': {'text': '0.6 mi', 'value': 932}, 'duration': {'text': '2 mins', 'value': 117}, 'end_location': {'lat': 41.7126866, 'lng': -87.62014669999999}, 'html_instructions': 'Turn <b>left</b> onto <b>E 100th St</b>', 'maneuver': 'turn-left', 'polyline': {'points': 'k`r}FrcvuO@tB@zB@xB@tB@zBBtBP~@Rx@Fd@FZBT@P@TCf@Gb@G\\CLEPCPK`@Gh@@`C@tB@zB?vB@zB@vB@`C?pC'}, 'start_location': {'lat': 41.7128608, 'lng': -87.6090569}, 'travel_mode': 'DRIVING'}, {'distance': {'text': '0.1 mi', 'value': 223}, 'duration': {'text': '1 min', 'value': 30}, 'end_location': {'lat': 41.7146798, 'lng': -87.6204006}, 'html_instructions': 'Turn <b>right</b> onto <b>S Michigan Ave</b>', 'maneuver': 'turn-right', 'polyline': {'points': 'i_r}F|hxuOi@Bi@BYB]BA@gAFA@A?_@BK@A?E?_CN'}, 'start_location': {'lat': 41.7126866, 'lng': -87.62014669999999}, 'travel_mode': 'DRIVING'}, {'distance': {'text': '217 ft', 'value': 66}, 'duration': {'text': '1 min', 'value': 8}, 'end_location': {'lat': 41.715039, 'lng': -87.6210303}, 'html_instructions': 'Turn <b>left</b> onto <b>S Wabash Ave</b>', 'maneuver': 'turn-left', 'polyline': {'points': 'wkr}FnjxuOi@hA]r@'}, 'start_location': {'lat': 41.7146798, 'lng': -87.6204006}, 'travel_mode': 'DRIVING'}, {'distance': {'text': '3.1 mi', 'value': 5061}, 'duration': {'text': '3 mins', 'value': 194}, 'end_location': {'lat': 41.75962440000001, 'lng': -87.6253905}, 'html_instructions': 'Take the ramp on the <b>left</b> onto <b>I-94 W</b>', 'maneuver': 'ramp-left', 'polyline': {'points': '_nr}FlnxuO_@|AO`@i@zA_@r@]j@CBY\\EFUXC@m@h@k@\\CBaDlAu@PUJeCTiBB_BBG@U?[?U@MBUNE@wAAsDFsC@yB?wIDmCFi@?cIDwA@iGFs@@S?gA@}ABwDBcC?uBDkBB_IF_HHc@?gA@G@A?Y?c@?cIHc@?gJJyB@iD?gDDsDFc@?I@I?I?E?uB@S?sA@O?eA@qIHg@@y@@}A?oA@kCBoEFkCBe@@C?aBB}BDqEPqADsAFuHTkCD]@mDBwA@{A?S?uCBsB@'}, 'start_location': {'lat': 41.715039, 'lng': -87.6210303}, 'travel_mode': 'DRIVING'}, {'distance': {'text': '0.2 mi', 'value': 259}, 'duration': {'text': '1 min', 'value': 11}, 'end_location': {'lat': 41.76189850000001, 'lng': -87.62519370000001}, 'html_instructions': 'Take exit <b>59C</b> toward <b>71st St</b>', 'maneuver': 'ramp-right', 'polyline': {'points': 'sd{}FtiyuOGOCEACAAOAqBCgACOASCiEB'}, 'start_location': {'lat': 41.75962440000001, 'lng': -87.6253905}, 'travel_mode': 'DRIVING'}, {'distance': {'text': '0.1 mi', 'value': 233}, 'duration': {'text': '1 min', 'value': 17}, 'end_location': {'lat': 41.7639361, 'lng': -87.6248646}, 'html_instructions': 'Keep <b>right</b> to stay on <b>Exit 59C</b>', 'maneuver': 'keep-right', 'polyline': {'points': '{r{}FlhyuO[EuAAi@AI?]AiCQk@CCAEACCCECCACEI'}, 'start_location': {'lat': 41.76189850000001, 'lng': -87.62519370000001}, 'travel_mode': 'DRIVING'}, {'distance': {'text': '0.1 mi', 'value': 159}, 'duration': {'text': '1 min', 'value': 28}, 'end_location': {'lat': 41.76536530000001, 'lng': -87.6248936}, 'html_instructions': 'Turn <b>left</b> onto <b>S State St</b>', 'maneuver': 'turn-left', 'polyline': {'points': 's_|}FjfyuOw@@y@@aB@iA?'}, 'start_location': {'lat': 41.7639361, 'lng': -87.6248646}, 'travel_mode': 'DRIVING'}, {'distance': {'text': '2.8 mi', 'value': 4548}, 'duration': {'text': '10 mins', 'value': 614}, 'end_location': {'lat': 41.7647444, 'lng': -87.6794886}, 'html_instructions': 'Turn <b>left</b> at the 1st cross street onto <b>W 71st St</b>', 'maneuver': 'turn-left', 'polyline': {'points': 'qh|}FpfyuO_@@?v@@x@?D?@?f@?@@l@?@?Z@bA?R?n@?bA@nCAVDR?P@^@z@?`@?b@@fA@xA@xB@|B@tB@xB@xB@zB?dB?LB`C@xB?B@~B@hB?H?B?d@?lA@pA?f@?BBxB@pB@l@?@?vA@T?hA?F@zB?H@rC?rA@bA?t@BzA?Z@vB@~B?~B@tBBnFBpF@xC?tA@xBBxB@xB@vB@zB?vB@tBBzB?rB@lA?n@@zB@vB@vB@h@?`B?xB?^BfA@~A?pC@pAB~C@|C@rA?lB?L?~A@\\?tA?Z?zBBpF@pF@pF@pF@~B@rB@zB?vB@hB?P@rB?nC@dB@rFBzE?~A?x@@vC?T?R@vA?n@'}, 'start_location': {'lat': 41.76536530000001, 'lng': -87.6248936}, 'travel_mode': 'DRIVING'}, {'distance': {'text': '0.3 mi', 'value': 408}, 'duration': {'text': '1 min', 'value': 66}, 'end_location': {'lat': 41.7610764, 'lng': -87.6793747}, 'html_instructions': 'Turn <b>left</b> onto <b>S Bell Ave</b>', 'maneuver': 'turn-left', 'polyline': {'points': 'sd|}Fx{cvOvAGvDC|ACtA?vGG'}, 'start_location': {'lat': 41.7647444, 'lng': -87.6794886}, 'travel_mode': 'DRIVING'}, {'distance': {'text': '0.2 mi', 'value': 307}, 'duration': {'text': '2 mins', 'value': 117}, 'end_location': {'lat': 41.7610457, 'lng': -87.68307709999999}, 'html_instructions': 'Turn <b>right</b> onto <b>W 73rd St</b>', 'maneuver': 'turn-right', 'polyline': {'points': 'wm{}F`{cvO?zB@vB?|B@vB@zB?~B'}, 'start_location': {'lat': 41.7610764, 'lng': -87.6793747}, 'travel_mode': 'DRIVING'}, {'distance': {'text': '479 ft', 'value': 146}, 'duration': {'text': '1 min', 'value': 21}, 'end_location': {'lat': 41.7623591, 'lng': -87.6831101}, 'html_instructions': 'Turn <b>right</b> onto <b>S Western Ave</b>', 'maneuver': 'turn-right', 'polyline': {'points': 'qm{}FfrdvOeGD'}, 'start_location': {'lat': 41.7610457, 'lng': -87.68307709999999}, 'travel_mode': 'DRIVING'}], 'traffic_speed_entry': [], 'via_waypoint': []}], 'overview_polyline': {'points': 'uzq}FhcvuOuDH@tBBtFBpFBtBP~@Z~AJp@Bf@KjAUnASjABvFDfN@rGsAFaCPo@FG?_CNi@hA]r@_@|Ay@|B}@~Ay@bAq@j@o@`@aDlAu@PUJeCTiEF]@q@@MBUN}A?gIHqMDwDFyUPyDD{HBaFHkURwWVcH@{ILaA@cFBoMLsJFeKL_FHcHViK\\iDFuJDiGDKUCEaCEwAESCiEB[EuAAs@AwEYQOGMqBBkD@_@@?v@@~@?h@@p@@rB?zGDd@BzABfFFfNJhVLdYH~QN~d@Pj]HhV?xCDfDF`PBzPZdmA@zF@fCnGKrDCvGG?zB@tFBrF?~BeGD'}, 'summary': 'I-94 W and W 71st St', 'warnings': [], 'waypoint_order': []}, {'bounds': {'northeast': {'lat': 41.7623591, 'lng': -87.6090147}, 'southwest': {'lat': 41.71194790000001, 'lng': -87.6831101}}, 'copyrights': 'Map data ©2019', 'legs': [{'distance': {'text': '7.2 mi', 'value': 11619}, 'duration': {'text': '21 mins', 'value': 1270}, 'duration_in_traffic': {'text': '20 mins', 'value': 1226}, 'end_address': 'S Western Ave, Chicago, IL, USA', 'end_location': {'lat': 41.7623591, 'lng': -87.6831101}, 'start_address': 'E 100th Pl, Chicago, IL 60628, USA', 'start_location': {'lat': 41.71194790000001, 'lng': -87.6090147}, 'steps': [{'distance': {'text': '335 ft', 'value': 102}, 'duration': {'text': '1 min', 'value': 16}, 'end_location': {'lat': 41.7128608, 'lng': -87.6090569}, 'html_instructions': 'Head <b>north</b> on <b>S St Lawrence Ave</b> toward <b>E 100th St</b>', 'polyline': {'points': 'uzq}FhcvuOuDH'}, 'start_location': {'lat': 41.71194790000001, 'lng': -87.6090147}, 'travel_mode': 'DRIVING'}, {'distance': {'text': '0.6 mi', 'value': 932}, 'duration': {'text': '2 mins', 'value': 117}, 'end_location': {'lat': 41.7126866, 'lng': -87.62014669999999}, 'html_instructions': 'Turn <b>left</b> onto <b>E 100th St</b>', 'maneuver': 'turn-left', 'polyline': {'points': 'k`r}FrcvuO@tB@zB@xB@tB@zBBtBP~@Rx@Fd@FZBT@P@TCf@Gb@G\\CLEPCPK`@Gh@@`C@tB@zB?vB@zB@vB@`C?pC'}, 'start_location': {'lat': 41.7128608, 'lng': -87.6090569}, 'travel_mode': 'DRIVING'}, {'distance': {'text': '0.1 mi', 'value': 223}, 'duration': {'text': '1 min', 'value': 30}, 'end_location': {'lat': 41.7146798, 'lng': -87.6204006}, 'html_instructions': 'Turn <b>right</b> onto <b>S Michigan Ave</b>', 'maneuver': 'turn-right', 'polyline': {'points': 'i_r}F|hxuOi@Bi@BYB]BA@gAFA@A?_@BK@A?E?_CN'}, 'start_location': {'lat': 41.7126866, 'lng': -87.62014669999999}, 'travel_mode': 'DRIVING'}, {'distance': {'text': '217 ft', 'value': 66}, 'duration': {'text': '1 min', 'value': 8}, 'end_location': {'lat': 41.715039, 'lng': -87.6210303}, 'html_instructions': 'Turn <b>left</b> onto <b>S Wabash Ave</b>', 'maneuver': 'turn-left', 'polyline': {'points': 'wkr}FnjxuOi@hA]r@'}, 'start_location': {'lat': 41.7146798, 'lng': -87.6204006}, 'travel_mode': 'DRIVING'}, {'distance': {'text': '1.2 mi', 'value': 1939}, 'duration': {'text': '1 min', 'value': 84}, 'end_location': {'lat': 41.7315534, 'lng': -87.6244135}, 'html_instructions': 'Take the ramp on the <b>left</b> onto <b>I-94 W</b>', 'maneuver': 'ramp-left', 'polyline': {'points': '_nr}FlnxuO_@|AO`@i@zA_@r@]j@CBY\\EFUXC@m@h@k@\\CBaDlAu@PUJeCTiBB_BBG@U?[?U@MBUNE@wAAsDFsC@yB?wIDmCFi@?cIDwA@iGFs@@S?gA@}ABwDBcC?'}, 'start_location': {'lat': 41.715039, 'lng': -87.6210303}, 'travel_mode': 'DRIVING'}, {'distance': {'text': '0.2 mi', 'value': 296}, 'duration': {'text': '1 min', 'value': 16}, 'end_location': {'lat': 41.7341915, 'lng': -87.62408789999999}, 'html_instructions': 'Take exit <b>61B</b> toward <b>87th St</b>', 'maneuver': 'ramp-right', 'polyline': {'points': 'euu}FpcyuOy@WGCC?C?OA_@A_BCWAsCE_@Ai@ASAQAEAGAKG'}, 'start_location': {'lat': 41.7315534, 'lng': -87.6244135}, 'travel_mode': 'DRIVING'}, {'distance': {'text': '0.1 mi', 'value': 236}, 'duration': {'text': '1 min', 'value': 47}, 'end_location': {'lat': 41.7363139, 'lng': -87.6241788}, 'html_instructions': 'Merge onto <b>S State St</b>', 'maneuver': 'merge', 'polyline': {'points': 'uev}FpayuOcA@yBD}CDkAB'}, 'start_location': {'lat': 41.7341915, 'lng': -87.62408789999999}, 'travel_mode': 'DRIVING'}, {'distance': {'text': '3.0 mi', 'value': 4844}, 'duration': {'text': '11 mins', 'value': 644}, 'end_location': {'lat': 41.7355904, 'lng': -87.6824396}, 'html_instructions': 'Turn <b>left</b> onto <b>W 87th St</b>', 'maneuver': 'turn-left', 'polyline': {'points': '}rv}FbbyuO?x@@x@?X?h@@bA?`@@fB@tB?X?rAAlCBjADr@Fx@XfC@P@P?J@J@hA@x@?Z?~B@fA?l@BdB?z@@xB@z@ENBxCAXAFC\\M|@Kx@Cd@ATAR?X?t@?R@T@|EAfE@l@?tF@jF@rF@nB?dA?l@?\\@`@JZ?N?V?jA@t@@Z?d@?lB?fABnFBtBBzB@pB@~B@`E?p@?xB@vB?fB?^@jB?rB@|B?jB@T@pAI\\@rF@pB@`C?h@@~@?V@Z?f@?j@@zB@bA@r@?tA?V@zA?j@@b@?fC@r@?b@@~A@t@?b@@b@?hB@hCBrC?~A@dB?^?P?xAB`B?d@?T?b@?n@@x@?h@?j@?r@?n@?n@?bAB~BAzA?fA@fA?V@hCB|F@nF@|C@~CBpD?~A@pCB~D?nA?\\@tA@xC'}, 'start_location': {'lat': 41.7363139, 'lng': -87.6241788}, 'travel_mode': 'DRIVING'}, {'distance': {'text': '1.9 mi', 'value': 2981}, 'duration': {'text': '5 mins', 'value': 308}, 'end_location': {'lat': 41.7623591, 'lng': -87.6831101}, 'html_instructions': 'Turn <b>right</b> onto <b>S Western Ave</b>', 'maneuver': 'turn-right', 'polyline': {'points': 'mnv}FfndvOuB@sEFwEDkKHgC@[?mFDcB?wDDkB@gA@U?iA@gA@c@@qA@qA?wDBgBBkA@uD@i@BC@c@AwA@UAgA@e@@k@?ENO?]?u@?_@@{@?Q?MEMAuEBiB@wEDg@@eA@_@@u@?oCD{@BmA?gBB[@{C?_B?Q?iGFaBBeGD'}, 'start_location': {'lat': 41.7355904, 'lng': -87.6824396}, 'travel_mode': 'DRIVING'}], 'traffic_speed_entry': [], 'via_waypoint': []}], 'overview_polyline': {'points': 'uzq}FhcvuOuDH@tBBtFBpFBtBP~@Z~AJp@Bf@KjAUnASjABvFDfN@rGsAFaCPo@FG?_CNi@hA]r@_@|Ay@|B}@~Ay@bAq@j@o@`@aDlAu@PUJeCTiEF]@q@@MBUN}A?gIHqMDwDFyUPyDD{HBaA[w@CkHMuAGSI}DFiFH@rB@fCBxGA`FH~B`@`EBb@DzC@pGFvIENBxCC`@a@zDCxBFre@@`G@`@JZ?f@BbE?tDFdJDlFB`I@jKB|J@`C@pAI\\BdJ@jDBzCFtOH`NFxUD`KBbQN~b@D`O@rB@xCuB@kLLsOJePJcPJ_HFaGBm@D{B?}A?qA@ENO?sA?{A@Q?MEcF@aIFcEDkEHuDBwD@qB?qRP'}, 'summary': 'W 87th St and S Western Ave', 'warnings': [], 'waypoint_order': []}, {'bounds': {'northeast': {'lat': 41.7623591, 'lng': -87.6090147}, 'southwest': {'lat': 41.71194790000001, 'lng': -87.6831101}}, 'copyrights': 'Map data ©2019', 'legs': [{'distance': {'text': '7.2 mi', 'value': 11626}, 'duration': {'text': '22 mins', 'value': 1293}, 'duration_in_traffic': {'text': '22 mins', 'value': 1298}, 'end_address': 'S Western Ave, Chicago, IL, USA', 'end_location': {'lat': 41.7623591, 'lng': -87.6831101}, 'start_address': 'E 100th Pl, Chicago, IL 60628, USA', 'start_location': {'lat': 41.71194790000001, 'lng': -87.6090147}, 'steps': [{'distance': {'text': '335 ft', 'value': 102}, 'duration': {'text': '1 min', 'value': 16}, 'end_location': {'lat': 41.7128608, 'lng': -87.6090569}, 'html_instructions': 'Head <b>north</b> on <b>S St Lawrence Ave</b> toward <b>E 100th St</b>', 'polyline': {'points': 'uzq}FhcvuOuDH'}, 'start_location': {'lat': 41.71194790000001, 'lng': -87.6090147}, 'travel_mode': 'DRIVING'}, {'distance': {'text': '0.6 mi', 'value': 932}, 'duration': {'text': '2 mins', 'value': 117}, 'end_location': {'lat': 41.7126866, 'lng': -87.62014669999999}, 'html_instructions': 'Turn <b>left</b> onto <b>E 100th St</b>', 'maneuver': 'turn-left', 'polyline': {'points': 'k`r}FrcvuO@tB@zB@xB@tB@zBBtBP~@Rx@Fd@FZBT@P@TCf@Gb@G\\CLEPCPK`@Gh@@`C@tB@zB?vB@zB@vB@`C?pC'}, 'start_location': {'lat': 41.7128608, 'lng': -87.6090569}, 'travel_mode': 'DRIVING'}, {'distance': {'text': '0.1 mi', 'value': 223}, 'duration': {'text': '1 min', 'value': 30}, 'end_location': {'lat': 41.7146798, 'lng': -87.6204006}, 'html_instructions': 'Turn <b>right</b> onto <b>S Michigan Ave</b>', 'maneuver': 'turn-right', 'polyline': {'points': 'i_r}F|hxuOi@Bi@BYB]BA@gAFA@A?_@BK@A?E?_CN'}, 'start_location': {'lat': 41.7126866, 'lng': -87.62014669999999}, 'travel_mode': 'DRIVING'}, {'distance': {'text': '217 ft', 'value': 66}, 'duration': {'text': '1 min', 'value': 8}, 'end_location': {'lat': 41.715039, 'lng': -87.6210303}, 'html_instructions': 'Turn <b>left</b> onto <b>S Wabash Ave</b>', 'maneuver': 'turn-left', 'polyline': {'points': 'wkr}FnjxuOi@hA]r@'}, 'start_location': {'lat': 41.7146798, 'lng': -87.6204006}, 'travel_mode': 'DRIVING'}, {'distance': {'text': '2.1 mi', 'value': 3422}, 'duration': {'text': '2 mins', 'value': 136}, 'end_location': {'lat': 41.7448911, 'lng': -87.624787}, 'html_instructions': 'Take the ramp on the <b>left</b> onto <b>I-94 W</b>', 'maneuver': 'ramp-left', 'polyline': {'points': '_nr}FlnxuO_@|AO`@i@zA_@r@]j@CBY\\EFUXC@m@h@k@\\CBaDlAu@PUJeCTiBB_BBG@U?[?U@MBUNE@wAAsDFsC@yB?wIDmCFi@?cIDwA@iGFs@@S?gA@}ABwDBcC?uBDkBB_IF_HHc@?gA@G@A?Y?c@?cIHc@?gJJyB@iD?gDDsDFc@?I@I?I?E?uB@S?sA@'}, 'start_location': {'lat': 41.715039, 'lng': -87.6210303}, 'travel_mode': 'DRIVING'}, {'distance': {'text': '0.2 mi', 'value': 341}, 'duration': {'text': '1 min', 'value': 17}, 'end_location': {'lat': 41.7479306, 'lng': -87.6246261}, 'html_instructions': 'Take exit <b>60C</b> toward <b>79th St</b>', 'maneuver': 'ramp-right', 'polyline': {'points': 'qhx}F|eyuO_@YA?A?cBCiCEm@G_HJ'}, 'start_location': {'lat': 41.7448911, 'lng': -87.624787}, 'travel_mode': 'DRIVING'}, {'distance': {'text': '0.2 mi', 'value': 345}, 'duration': {'text': '1 min', 'value': 38}, 'end_location': {'lat': 41.7510227, 'lng': -87.62456309999999}, 'html_instructions': 'Keep <b>right</b> at the fork to stay on <b>Exit 60C</b> and merge onto <b>S State St</b>', 'maneuver': 'fork-right', 'polyline': {'points': 'q{x}F|dyuOQEU?o@?kB@}@@[AQ?[Ci@KgBDkC?'}, 'start_location': {'lat': 41.7479306, 'lng': -87.6246261}, 'travel_mode': 'DRIVING'}, {'distance': {'text': '3.0 mi', 'value': 4818}, 'duration': {'text': '13 mins', 'value': 769}, 'end_location': {'lat': 41.7500905, 'lng': -87.6826104}, 'html_instructions': 'Turn <b>left</b> onto <b>W 79th St</b><div style="font-size:0.9em">Pass by Church\'s Chicken (on the right)</div>', 'maneuver': 'turn-left', 'polyline': {'points': '{ny}FndyuO?nA?@?T@h@?R?vAHnADf@@^BvA@rC@~A@fB?P@p@?d@?h@@fFDpFBjF@pADdCCV@`C@zB?rBBvBDrF@n@@lBAxA?J?N?xABxBBrFBtF?|B@rB?hB@P@tBBtF@pF@xCBxA?nBB`C@pFBpF@jC?dB@hB?fC?jA@P@vC@|C?nABxC@vA@lA@dD@nA?dD@zC@rA?dA@p@@jB@\\?~@?d@@zBBpF@pF@rF@lFBrF@lF@jC@pB@lC@bB@hF@zF?vA@tB@~A?n@?n@@vB?PFlD?TBvC@|@Aj@BjAAh@?t@'}, 'start_location': {'lat': 41.7510227, 'lng': -87.62456309999999}, 'travel_mode': 'DRIVING'}, {'distance': {'text': '0.9 mi', 'value': 1377}, 'duration': {'text': '3 mins', 'value': 162}, 'end_location': {'lat': 41.7623591, 'lng': -87.6831101}, 'html_instructions': 'Turn <b>right</b> onto <b>S Western Ave</b>', 'maneuver': 'turn-right', 'polyline': {'points': 'aiy}FhodvOM`@gA@e@@k@?ENO?]?u@?_@@{@?Q?MEMAuEBiB@wEDg@@eA@_@@u@?oCD{@BmA?gBB[@{C?_B?Q?iGFaBBeGD'}, 'start_location': {'lat': 41.7500905, 'lng': -87.6826104}, 'travel_mode': 'DRIVING'}], 'traffic_speed_entry': [], 'via_waypoint': []}], 'overview_polyline': {'points': 'uzq}FhcvuOuDH@tBBtFBpFBtBP~@Z~AJp@Bf@KjAUnASjABvFDfN@rGsAFaCPo@FG?_CNi@hA]r@_@|Ay@|B}@~Ay@bAq@j@o@`@aDlAu@PUJeCTiEF]@q@@MBUN}A?gIHqMDwDFyUPyDD{HBaFHkURwWVcH@{ILaA@cFBc@YmFIm@G_HJg@E{C@yA?m@Ci@KgBDkC??nA?V@|@?vAHnAFfADjFDjGFhPD|HDdCCVB|FBjFFbH?fEBnFHzUN|`@Ltc@N|ZDdND`GNzk@Lzg@BtHHlIFlIA~AM`@gA@qA@ENO?sA?{A@Q?MEcF@oLJuA@kEHmJDqB?kJJeGD'}, 'summary': 'I-94 W and W 79th St', 'warnings': [], 'waypoint_order': []}]
# print(directions_result)

overview_polyline = directions_result[0]["overview_polyline"]["points"]
# print(overview_polyline)
overview_path = polyline.decode(overview_polyline)
print(overview_path)
print(len(overview_path))



# Look up an address with reverse geocoding
geo_to_address = gmaps.reverse_geocode(overview_path[5],
                                       result_type="street_address")[0]
address_components = geo_to_address["address_components"]

formatted_string = '000XX'

address_number = address_components[0]["long_name"]

if len(address_number) == 1:
    address_number = '0000X'
elif len(address_number) == 2:
    address_number = '000XX'
elif len(address_number) == 3:
    address_number = replace_str_index(formatted_string, 2, address_number[0])
elif len(address_number) == 4:
    formatted_string = replace_str_index(formatted_string, 1, address_number[0])
    address_number = replace_str_index(formatted_string, 2, address_number[1])
elif len(address_number) == 5:
    formatted_string = replace_str_index(formatted_string, 0, address_number[0])
    formatted_string = replace_str_index(formatted_string, 1, address_number[1])
    address_number = replace_str_index(formatted_string, 2, address_number[2])
else:
    address_number = formatted_string

address_name = address_components[1]["short_name"].upper()

address = address_number + ' ' + address_name

print(address)
import time
start_time = time.time()

print(score_table.loc[score_table['Block'] == address]['Score'].to_list()[0])



address_list = []
for i in range(len(overview_path)):
    geo_to_address = gmaps.reverse_geocode(overview_path[i],
                                           result_type="street_address")[0]
    address_components = geo_to_address["address_components"]

    address_number = address_components[0]["long_name"]

    address_name = address_components[1]["short_name"]

    address = address_number + ' ' + address_name

    address_list.append(address)

    address_threat_score = score_table.loc[score_table['Block'] == address]['Score'].to_list()[0]

print("--- %s seconds ---" % (time.time() - start_time))
